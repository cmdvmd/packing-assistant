#: import join os.path.join

<ScreenManager>:
    BagsScreen:
        name: 'bags'
    EditScreen:
        name: 'edit'

<BagsScreen>:
    bag_scroll: bag_scroll
    bag_list: bag_list

    # Main layout
    BoxLayout:
        orientation: 'vertical'

        # Toolbar with title and plus button
        MDToolbar:
            title: 'Packer'
            right_action_items: [['plus', lambda x: root.new_bag()]]
            elevation: 12

        # Show available bags
        ScrollView:
            id: bag_scroll

            # Layout for available bags
            MDGridLayout:
                id: bag_list
                cols: 1
                spacing: 1
                adaptive_height: True

    # Button to scan qr code
    MDFloatingActionButton:
        icon: 'camera'
        elevation_normal: 8
        pos_hint: {'right': 0.95, 'top': 0.15}

<EditScreen>:
    name_input: name_input
    description_input: description_input

    # Main layout
    BoxLayout:
        orientation: 'vertical'
        spacing: 5

        # Toolbar with title and save button
        MDToolbar:
            title: root.bag_name
            elevation: 12

            # Save button
            MDTextButton:
                text: 'Save'
                color: 1, 1, 1, 1
                pos_hint: {'center_y': 0.5}
                on_release: root.save()

        # Show data
        GridLayout:
            cols: 1
            spacing: 2
            padding: 15

            # Show QR code
            QRCode:
                source: join(app.user_data_dir, root.bag_id + '.png')
                size_hint_y: 0.5

            # Show input for bag name
            MDTextField:
                id: name_input
                hint_text: 'Name'
                text: root.bag_name
                required: True

            # Show input for bag description
            MDTextField:
                id: description_input
                hint_text: 'Description'
                multiline: True
                size_hint_y: 0.5
